#!/usr/bin/env python3
"""
Noetron - Semantic Analysis Environment
Main entry point for the Noetron interactive environment
"""

import sys
import os
from pathlib import Path

# Add the cli directory to the path
sys.path.insert(0, str(Path(__file__).parent / 'cli'))

def main():
    """Main entry point for the noetron script"""
    if len(sys.argv) < 2:
        print("üîÆ NOETRON - Semantic Analysis Environment")
        print("Usage: noetron activate <csv_file>")
        print("       noetron --help")
        sys.exit(1)
    
    command = sys.argv[1]
    
    if command == "--help" or command == "-h":
        print("üîÆ NOETRON - Semantic Analysis Environment")
        print()
        print("Commands:")
        print("  activate <csv_file>  - Activate the interactive environment")
        print("  --help, -h          - Show this help")
        print()
        print("Example:")
        print("  noetron activate database/merleau_ponty.csv")
        sys.exit(0)
    
    elif command == "activate":
        if len(sys.argv) < 3:
            print("‚ùå Error: CSV file required")
            print("Usage: noetron activate <csv_file>")
            sys.exit(1)
        
        csv_file = sys.argv[2]
        
        # Check if the file exists
        if not Path(csv_file).exists():
            print(f"‚ùå Error: File '{csv_file}' does not exist")
            sys.exit(1)
        
        # Launch interactive mode
        try:
            from cli.search import launch_interactive_mode
            launch_interactive_mode(csv_file)
        except ImportError as e:
            print(f"‚ùå Import error: {e}")
            print("Make sure all modules are installed")
            sys.exit(1)
        except Exception as e:
            print(f"‚ùå Error: {e}")
            sys.exit(1)
    
    else:
        print(f"‚ùå Unknown command: {command}")
        print("Use 'noetron --help' to see available commands")
        sys.exit(1)

if __name__ == '__main__':
    main()

